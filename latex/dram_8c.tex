\doxysection{src/cemu/dram.c 文件参考}
\hypertarget{dram_8c}{}\label{dram_8c}\index{src/cemu/dram.c@{src/cemu/dram.c}}


DRAM功能实现  


{\ttfamily \#include "{}dram.\+h"{}}\newline
{\ttfamily \#include "{}log.\+h"{}}\newline
\doxysubsubsection*{函数}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{dram_8c_a0d4ebb397cce21ecb57f4a58ef1a61be}\label{dram_8c_a0d4ebb397cce21ecb57f4a58ef1a61be} 
static u64 {\bfseries dram\+\_\+load\+\_\+8} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram, u64 addr)
\item 
static u64 \mbox{\hyperlink{dram_8c_a29abfb27d75683553704b48e5b44c489}{dram\+\_\+load\+\_\+16}} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram, u64 addr)
\item 
\Hypertarget{dram_8c_a7b67cb45981ccd0684f37f0b643f8217}\label{dram_8c_a7b67cb45981ccd0684f37f0b643f8217} 
static u64 {\bfseries dram\+\_\+load\+\_\+32} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram, u64 addr)
\item 
\Hypertarget{dram_8c_a43d559c1e0a1d2940807788a718b9036}\label{dram_8c_a43d559c1e0a1d2940807788a718b9036} 
static u64 {\bfseries dram\+\_\+load\+\_\+64} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram, u64 addr)
\item 
\Hypertarget{dram_8c_a77e2bcffaa07049a96632b0634d56f16}\label{dram_8c_a77e2bcffaa07049a96632b0634d56f16} 
static void {\bfseries dram\+\_\+store\+\_\+8} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram, u64 addr, u64 value)
\item 
\Hypertarget{dram_8c_a42c1158e11d047032be73d7af7e775b9}\label{dram_8c_a42c1158e11d047032be73d7af7e775b9} 
static void {\bfseries dram\+\_\+store\+\_\+16} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram, u64 addr, u64 value)
\item 
\Hypertarget{dram_8c_a2cb8784fa0bd9443b1cde2483af3a57c}\label{dram_8c_a2cb8784fa0bd9443b1cde2483af3a57c} 
static void {\bfseries dram\+\_\+store\+\_\+32} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram, u64 addr, u64 value)
\item 
\Hypertarget{dram_8c_a3107a7f87852889254f9276a078cc45b}\label{dram_8c_a3107a7f87852889254f9276a078cc45b} 
static void {\bfseries dram\+\_\+store\+\_\+64} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram, u64 addr, u64 value)
\item 
void \mbox{\hyperlink{dram_8c_a5e7a4b3989c297778f6d25448b8b815f}{dram\+\_\+init}} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram)
\begin{DoxyCompactList}\small\item\em 初始化\+DRAM结构体 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{dram_8c_ac8d4a5ca62a22e51842fe34fd7332c2c}{dram\+\_\+alloc\+\_\+data}} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram, size\+\_\+t size, void \texorpdfstring{$\ast$}{*}data)
\begin{DoxyCompactList}\small\item\em DRAM追加数据 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{dram_8c_a2b7a105e90f45695cf8c9a170cd95e76}{dram\+\_\+write\+\_\+data}} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram, size\+\_\+t offset, size\+\_\+t size, u64 value)
\begin{DoxyCompactList}\small\item\em DRAM向指定地址写入数据 \end{DoxyCompactList}\item 
u64 \mbox{\hyperlink{dram_8c_adf6107dcde9e8780fd226d6a2d3e9a7b}{dram\+\_\+load\+\_\+data}} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram, size\+\_\+t offset, size\+\_\+t size)
\begin{DoxyCompactList}\small\item\em DRAM在指定地址加载数据 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{dram_8c_a7f93d1d7364f0cc16d2ed3772c8059d4}{dram\+\_\+release\+\_\+data}} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram, size\+\_\+t size)
\begin{DoxyCompactList}\small\item\em DRAM释放尾部数据 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{dram_8c_a05562b8b83599b63b38c1a966999b2fe}{dram\+\_\+free}} (\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}dram)
\begin{DoxyCompactList}\small\item\em 释放\+DRAM \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
DRAM功能实现 

\begin{DoxyAuthor}{作者}
lancer (\href{mailto:lancerstadium@163.com}{\texttt{ lancerstadium@163.\+com}}) 
\end{DoxyAuthor}
\begin{DoxyVersion}{版本}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{日期}
2024-\/01-\/08 
\end{DoxyDate}
\begin{DoxyCopyright}{版权所有}
Copyright (c) 2024 
\end{DoxyCopyright}


\doxysubsection{函数说明}
\Hypertarget{dram_8c_ac8d4a5ca62a22e51842fe34fd7332c2c}\label{dram_8c_ac8d4a5ca62a22e51842fe34fd7332c2c} 
\index{dram.c@{dram.c}!dram\_alloc\_data@{dram\_alloc\_data}}
\index{dram\_alloc\_data@{dram\_alloc\_data}!dram.c@{dram.c}}
\doxysubsubsection{\texorpdfstring{dram\_alloc\_data()}{dram\_alloc\_data()}}
{\footnotesize\ttfamily void dram\+\_\+alloc\+\_\+data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}}]{dram,  }\item[{size\+\_\+t}]{size,  }\item[{void \texorpdfstring{$\ast$}{*}}]{data }\end{DoxyParamCaption})}



DRAM追加数据 


\begin{DoxyParams}{参数}
{\em dram} & 动态随机存取存储器 \\
\hline
{\em size} & 申请大小 \\
\hline
{\em data} & 数据 \\
\hline
\end{DoxyParams}
\Hypertarget{dram_8c_a05562b8b83599b63b38c1a966999b2fe}\label{dram_8c_a05562b8b83599b63b38c1a966999b2fe} 
\index{dram.c@{dram.c}!dram\_free@{dram\_free}}
\index{dram\_free@{dram\_free}!dram.c@{dram.c}}
\doxysubsubsection{\texorpdfstring{dram\_free()}{dram\_free()}}
{\footnotesize\ttfamily void dram\+\_\+free (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}}]{dram }\end{DoxyParamCaption})}



释放\+DRAM 


\begin{DoxyParams}{参数}
{\em dram} & 动态随机存取存储器 \\
\hline
\end{DoxyParams}
\Hypertarget{dram_8c_a5e7a4b3989c297778f6d25448b8b815f}\label{dram_8c_a5e7a4b3989c297778f6d25448b8b815f} 
\index{dram.c@{dram.c}!dram\_init@{dram\_init}}
\index{dram\_init@{dram\_init}!dram.c@{dram.c}}
\doxysubsubsection{\texorpdfstring{dram\_init()}{dram\_init()}}
{\footnotesize\ttfamily void dram\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}}]{dram }\end{DoxyParamCaption})}



初始化\+DRAM结构体 


\begin{DoxyParams}{参数}
{\em dram} & 动态随机存取存储器 \\
\hline
\end{DoxyParams}
\Hypertarget{dram_8c_a29abfb27d75683553704b48e5b44c489}\label{dram_8c_a29abfb27d75683553704b48e5b44c489} 
\index{dram.c@{dram.c}!dram\_load\_16@{dram\_load\_16}}
\index{dram\_load\_16@{dram\_load\_16}!dram.c@{dram.c}}
\doxysubsubsection{\texorpdfstring{dram\_load\_16()}{dram\_load\_16()}}
{\footnotesize\ttfamily static u64 dram\+\_\+load\+\_\+16 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}}]{dram,  }\item[{u64}]{addr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

\begin{DoxyNote}{注解}
小端法是将最小端（权值最低位）最先存储。 当读取数据时，我们先读取最低的地址中存放的值通过返回值输送给总线， 随后左移 8 位（1 字节）并与 0xff（8 个 1）进行与操作来得到最低字节的数据， 并清空高字节以便用于或操作。 
\end{DoxyNote}
\Hypertarget{dram_8c_adf6107dcde9e8780fd226d6a2d3e9a7b}\label{dram_8c_adf6107dcde9e8780fd226d6a2d3e9a7b} 
\index{dram.c@{dram.c}!dram\_load\_data@{dram\_load\_data}}
\index{dram\_load\_data@{dram\_load\_data}!dram.c@{dram.c}}
\doxysubsubsection{\texorpdfstring{dram\_load\_data()}{dram\_load\_data()}}
{\footnotesize\ttfamily u64 dram\+\_\+load\+\_\+data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}}]{dram,  }\item[{size\+\_\+t}]{offset,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}



DRAM在指定地址加载数据 


\begin{DoxyParams}{参数}
{\em dram} & 动态随机存取存储器 \\
\hline
{\em offset} & 偏移量 \\
\hline
{\em size} & 数据大小 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
u64 数据地址 
\end{DoxyReturn}
\Hypertarget{dram_8c_a7f93d1d7364f0cc16d2ed3772c8059d4}\label{dram_8c_a7f93d1d7364f0cc16d2ed3772c8059d4} 
\index{dram.c@{dram.c}!dram\_release\_data@{dram\_release\_data}}
\index{dram\_release\_data@{dram\_release\_data}!dram.c@{dram.c}}
\doxysubsubsection{\texorpdfstring{dram\_release\_data()}{dram\_release\_data()}}
{\footnotesize\ttfamily void dram\+\_\+release\+\_\+data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}}]{dram,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}



DRAM释放尾部数据 


\begin{DoxyParams}{参数}
{\em dram} & 动态随机存取存储器 \\
\hline
{\em size} & 数据大小 \\
\hline
\end{DoxyParams}
\Hypertarget{dram_8c_a2b7a105e90f45695cf8c9a170cd95e76}\label{dram_8c_a2b7a105e90f45695cf8c9a170cd95e76} 
\index{dram.c@{dram.c}!dram\_write\_data@{dram\_write\_data}}
\index{dram\_write\_data@{dram\_write\_data}!dram.c@{dram.c}}
\doxysubsubsection{\texorpdfstring{dram\_write\_data()}{dram\_write\_data()}}
{\footnotesize\ttfamily void dram\+\_\+write\+\_\+data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{dram_8h_a5c4f608d0cdf3a502dfe85d798e063ac}{DRAM}} \texorpdfstring{$\ast$}{*}}]{dram,  }\item[{size\+\_\+t}]{offset,  }\item[{size\+\_\+t}]{size,  }\item[{u64}]{value }\end{DoxyParamCaption})}



DRAM向指定地址写入数据 


\begin{DoxyParams}{参数}
{\em dram} & 动态随机存取存储器 \\
\hline
{\em offset} & 偏移量 \\
\hline
{\em size} & 数据大小 \\
\hline
{\em value} & 数据值 \\
\hline
\end{DoxyParams}
